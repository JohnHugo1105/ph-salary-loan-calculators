<header class="hero">
    <div class="hero-content">
        <h1>MP2 Savings Calculator</h1>
        <p class="subtitle">Project your earnings with Pag-IBIG's 5-year modified savings program.</p>
    </div>
</header>

<section class="container">
    <div class="calc-layout">
        <!-- LEFT COLUMN: INPUTS -->
        <div class="input-col">
            <mat-card class="input-card">
                <mat-card-header>
                    <mat-card-title>Savings Plan</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <form [formGroup]="form" class="grid-form">
                        <p class="desc-text">
                            MP2 (Modified Pag-IBIG 2) is a special voluntary savings facility with a 5-year maturity,
                            designed for higher dividends.
                        </p>

                        <mat-form-field appearance="outline">
                            <mat-label>Monthly Contribution (₱)</mat-label>
                            <input matInput type="text" appThousandsSeparator formControlName="monthlyContribution"
                                inputmode="decimal" />
                            <mat-hint>Minimum ₱500</mat-hint>
                        </mat-form-field>

                        <div class="form-row">
                            <mat-form-field appearance="outline">
                                <mat-label>Dividend Rate (%)</mat-label>
                                <input matInput type="number" formControlName="rate" step="0.01" />
                            </mat-form-field>

                            <mat-form-field appearance="outline">
                                <mat-label>Payout Mode</mat-label>
                                <mat-select formControlName="mode">
                                    <mat-option value="compounded">Compounded (5 Years)</mat-option>
                                    <mat-option value="annual">Annual Payout</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </form>
                </mat-card-content>
            </mat-card>

            <mat-card class="result-summary mobile-only" *ngIf="totals.accumulated > 0">
                <div class="summary-item">
                    <span>Total Contribution</span>
                    <strong>₱{{ totals.contribution | number:'1.0-0' }}</strong>
                </div>
                <div class="summary-item highlight">
                    <span>Total Dividends</span>
                    <strong>₱{{ totals.dividend | number:'1.2-2' }}</strong>
                </div>
                <div class="summary-item total">
                    <span>Total Value (Year 5)</span>
                    <strong>₱{{ totals.accumulated | number:'1.2-2' }}</strong>
                </div>
            </mat-card>
        </div>

        <!-- RIGHT COLUMN: RESULTS -->
        <div class="result-col">

            <!-- HERO RESULT CARD -->
            <mat-card class="result-card">
                <div class="result-label">Projected Total Value (5 Years)</div>
                <div class="result-value">₱{{ totals.accumulated | number:'1.2-2' }}</div>
                <div class="result-sub">
                    Dividends earned: <span class="accent-text">₱{{ totals.dividend | number:'1.2-2' }}</span>
                </div>
            </mat-card>

            <!-- CHART VISUALIZATION -->
            <mat-card class="chart-card">
                <h3>Growth Projection</h3>
                <div class="chart-wrapper">
                    <div class="chart-bars">
                        <div class="bar-group" *ngFor="let row of results">
                            <div class="bar-fill" [style.height]="getBarHeight(row.totalAccumulated)">
                                <span class="bar-val">₱{{ row.totalAccumulated | number:'1.0-0' }}</span>
                            </div>
                            <div class="bar-label">Yr {{ row.year }}</div>
                        </div>
                    </div>
                </div>
            </mat-card>

            <!-- TABLE DETAILS -->
            <mat-card class="table-card">
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th class="num">Contrib</th>
                                <th class="num">Dividend</th>
                                <th class="num">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let row of results">
                                <td>{{ row.year }}</td>
                                <td class="num">{{ row.cumulativeContrib | number:'1.0-0' }}</td>
                                <td class="num highlight">+{{ row.annualDividend | number:'1.2-2' }}</td>
                                <td class="num bold">{{ row.totalAccumulated | number:'1.2-2' }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </mat-card>
        </div>
    </div>

    <hr class="divider">

    <!-- SEO CONTENT -->
    <article class="content-article">
        <h2>Pag-IBIG MP2 Calculation Guide</h2>
        <p>
            The <strong>Modified Pag-IBIG 2 (MP2)</strong> is a voluntary savings program with a 5-year maturity.
            It historically earns a higher dividend rate than the regular Pag-IBIG savings.
            Dividends are tax-free and government-guaranteed.
        </p>

        <h3>Computation Logic</h3>
        <p>
            Dividends are calculated based on your <strong>Average Monthly Balance (AMB)</strong> multiplied by the
            dividend rate declared for the year.
        </p>
        <ul class="styled-list">
            <li><strong>Year 1:</strong> Your monthly contributions accumulate. The AMB for new money effectively earns
                roughly half the annual rate.</li>
            <li><strong>Year 2-5:</strong> Your previous balance (Capital + Earned Dividends in Compounded Mode) earns
                the full annual rate.</li>
        </ul>

        <h3>Payout Options</h3>
        <p>
            <strong>Compounded (5-Year Maturity):</strong> Dividends are re-invested, allowing your money to grow faster
            through the power of compounding.
            You receive the total principal plus all dividends after 5 years.
        </p>
        <p>
            <strong>Annual Payout:</strong> You receive the dividend earnings via bank/check every year.
            Your principal remains intact but does not grow from re-invested earnings.
        </p>
    </article>
</section>