<header class="hero">
  <div class="hero-content">
    <h1>Net Pay Calculator</h1>
    <p class="subtitle">Compute your take-home pay after tax, SSS, PhilHealth, and Pag-IBIG deductions.</p>
  </div>
</header>

<section class="container">
  <div class="calc-layout">
    <!-- INPUT COLUMN -->
    <div class="input-col">
      <mat-card class="input-card">
        <mat-card-header>
          <mat-card-title>Income Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <form [formGroup]="form" class="grid-form">
            <mat-form-field appearance="outline">
              <mat-label>Pay Frequency</mat-label>
              <mat-select formControlName="payFrequency">
                <mat-option value="monthly">Monthly</mat-option>
                <mat-option value="semi-monthly">Semi-monthly (15th/30th)</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Monthly Basic (₱)</mat-label>
              <input matInput type="text" appThousandsSeparator formControlName="monthlyBasic" inputmode="decimal" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Allowances (₱)</mat-label>
              <input matInput type="text" appThousandsSeparator formControlName="allowances" inputmode="decimal" />
            </mat-form-field>

            <div class="form-row">
              <mat-form-field appearance="outline">
                <mat-label>Overtime Hrs</mat-label>
                <input matInput type="number" formControlName="overtimeHours" min="0" step="0.01" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Multiplier</mat-label>
                <input matInput type="number" formControlName="overtimeMultiplier" min="1" step="0.01" />
              </mat-form-field>
            </div>

            <mat-checkbox formControlName="includeHolidayPays" color="primary">Include Holiday Pay</mat-checkbox>

            <div *ngIf="form.value.includeHolidayPays" class="holiday-section">
              <h4>Holiday Days</h4>
              <div class="grid-2">
                <mat-form-field appearance="outline">
                  <mat-label>Reg (Unworked)</mat-label>
                  <input matInput type="number" formControlName="regHolUnworkedDays" min="0" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Reg (Worked)</mat-label>
                  <input matInput type="number" formControlName="regHolWorkedDays" min="0" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Spec (Unworked)</mat-label>
                  <input matInput type="number" formControlName="specHolUnworkedDays" min="0" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Spec (Worked)</mat-label>
                  <input matInput type="number" formControlName="specHolWorkedDays" min="0" />
                </mat-form-field>
              </div>
            </div>

            <div class="advanced-settings">
              <span class="label">Advanced Settings</span>
              <div class="form-row">
                <mat-form-field appearance="outline" class="density-sm">
                  <mat-label>Days/Month</mat-label>
                  <input matInput type="number" formControlName="daysPerMonth" min="1" step="0.5" />
                </mat-form-field>
                <mat-form-field appearance="outline" class="density-sm">
                  <mat-label>Hours/Day</mat-label>
                  <input matInput type="number" formControlName="hoursPerDay" min="1" step="0.5" />
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- RESULT COLUMN -->
    <div class="result-col">
      <!-- NET PAY HERO CARD -->
      <mat-card class="result-card">
        <div class="result-label">Estimated Net Pay ({{ view.payFrequency }})</div>
        <div class="result-value">₱{{ view.netPay | number:'1.2-2' }}</div>
      </mat-card>

      <!-- BREAKDOWN CARDS -->
      <div class="breakdown" [@cardsIn]>

        <mat-card class="detail-card">
          <mat-card-header>
            <mat-card-title>Gross Income</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="row">
              <span>Basic ({{ view.payFrequency }})</span>
              <span class="num">₱{{ (view.payFrequency === 'semi-monthly' ? view.grossMonthly / 2 : view.grossMonthly) |
                number:'1.2-2' }}</span>
            </div>
            <div class="row" *ngIf="view.overtimePay > 0">
              <span>Overtime</span>
              <span class="num">₱{{ view.overtimePay | number:'1.2-2' }}</span>
            </div>
            <div class="row" *ngIf="view.includeHolidayPays">
              <span>Holiday Pay</span>
              <span class="num">₱{{ view.holidayPays.total | number:'1.2-2' }}</span>
            </div>
            <div class="row total">
              <span>Gross Total</span>
              <span class="num">₱{{ view.grossPeriod | number:'1.2-2' }}</span>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="detail-card">
          <mat-card-header>
            <mat-card-title>Deductions</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="row">
              <span>SSS</span>
              <span class="num">₱{{ view.contributions.sss.employee | number:'1.2-2' }}</span>
            </div>
            <div class="row">
              <span>PhilHealth</span>
              <span class="num">₱{{ view.contributions.philhealth.employee | number:'1.2-2' }}</span>
            </div>
            <div class="row">
              <span>Pag-IBIG</span>
              <span class="num">₱{{ view.contributions.pagibig.employee | number:'1.2-2' }}</span>
            </div>
            <div class="row">
              <span>Withholding Tax</span>
              <span class="num">₱{{ view.tax | number:'1.2-2' }}</span>
            </div>
            <div class="row total">
              <span>Total Deductions</span>
              <span class="num">₱{{ (view.contribPeriod + view.tax) | number:'1.2-2' }}</span>
            </div>
          </mat-card-content>
        </mat-card>

      </div>
      <app-ad type="cashSpace"></app-ad>
    </div>
  </div>

  <hr class="divider">

  <!-- SEO CONTENT -->
  <article class="content-article">
    <h2>How to Calculate Net Pay in the Philippines (2026)</h2>
    <p>
      To calculate your <strong>Net Pay</strong> (Take-Home Pay), you need to deduct all mandatory government
      contributions
      and withholding taxes from your <strong>Gross Salary</strong>. The general formula is:
    </p>

    <div class="formula-box"
      style="background: #f5f5f5; padding: 1rem; border-left: 4px solid #0077b6; margin: 1rem 0; font-family: monospace;">
      <strong>Net Pay = (Gross Pay - Total Deductions) - Withholding Tax</strong>
    </div>

    <p>
      <strong>Note for 2026:</strong> While the income tax rates from the TRAIN Law (effective Jan 1, 2023) remain
      consistent,
      contribution tables SSS and PhilHealth may have scheduled adjustments. This calculator is updated to reflect the
      latest
      known rates for 2026.
    </p>

    <h2>Understanding Your Deductions</h2>
    <p>
      As an employee in the Philippines, a portion of your salary is deducted for mandatory government benefits.
      Here is a quick breakdown to help you understand where your money goes:
    </p>
    <ul class="styled-list">
      <li>
        <strong>SSS (Social Security System):</strong> Provides social insurance for private sector employees. It covers
        sickness, maternity, disability, retirement, and death benefits. The contribution amount is based on your
        monthly
        salary credit.
      </li>
      <li>
        <strong>PhilHealth:</strong> The national health insurance program. It helps pay for medical care and hospital
        bills. The premium is shared between the employee and the employer.
      </li>
      <li>
        <strong>Pag-IBIG (HDMF):</strong> The Home Development Mutual Fund. It offers housing loans and savings
        programs.
        The standard contribution is 2% of your monthly compensation (capped at P5,000 salary base for P100
        contribution).
      </li>
    </ul>

    <h2>Is my 13th Month Pay Taxable?</h2>
    <p>
      <strong>Good news:</strong> Generally, your 13th-month pay is <strong>tax-exempt</strong>.
    </p>
    <p>
      Under Philippine tax law, 13th-month pay and other benefits are exempt from income tax up to a maximum of
      <strong>₱90,000</strong>.
      If your 13th-month pay plus other bonuses exceeds ₱90,000, only the <em>excess</em> amount remains taxable and is
      added to your gross taxable income for the year.
    </p>

    <h2>De Minimis Benefits Explained</h2>
    <p>
      <strong>De Minimis benefits</strong> are small allowances or privileges given by an employer to employees that are
      of relatively small value and are <strong>exempt from income tax</strong>. These do not count towards the ₱90,000
      bonus exemption cap.
    </p>
    <p>Common examples include:</p>
    <ul class="styled-list">
      <li><strong>Rice Subsidy:</strong> Up to ₱2,000 per month.</li>
      <li><strong>Laundry Allowance:</strong> Up to ₱300 per month.</li>
      <li><strong>Medical Cash Allowance:</strong> Up to ₱1,500 per semester (for dependents).</li>
      <li><strong>Clothing Allowance:</strong> Up to ₱6,000 per year.</li>
      <li><strong>Monetized Vacation Leave:</strong> Up to 10 days of unused leave credits.</li>
    </ul>

    <h2>How to use this Calculator</h2>
    <p>
      Simply enter your <strong>Monthly Basic Salary</strong> in the input field. If you have additional taxable
      allowances, add them to
      the allowances field.
      Non-taxable allowances should generally be excluded unless you want to see them in your total take-home cash.
      Check "Include Holiday Pay" if you worked on a Regular or Special Non-Working Holiday to see the additional
      premiums.
    </p>

    <p class="note">
      <strong>Disclaimer:</strong> This tool is for estimation purposes only. Actual deductions may vary based on
      company policies, tardiness/absences, and other adjustments. Always verify with your HR payslip.
    </p>
  </article>
</section>