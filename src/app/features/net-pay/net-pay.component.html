<header class="hero">
  <div class="hero-content">
    <h1>Net Pay Calculator</h1>
    <p class="subtitle">Compute your take-home pay after tax, SSS, PhilHealth, and Pag-IBIG deductions.</p>
  </div>
</header>

<section class="container">
  <div class="calc-layout">
    <!-- INPUT COLUMN -->
    <div class="input-col">
      <mat-card class="input-card">
        <mat-card-header>
          <mat-card-title>Income Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <form [formGroup]="form" class="grid-form">
            <mat-form-field appearance="outline">
              <mat-label>Pay Frequency</mat-label>
              <mat-select formControlName="payFrequency">
                <mat-option value="monthly">Monthly</mat-option>
                <mat-option value="semi-monthly">Semi-monthly (15th/30th)</mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Monthly Basic (₱)</mat-label>
              <input matInput type="text" appThousandsSeparator formControlName="monthlyBasic" inputmode="decimal" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Allowances (₱)</mat-label>
              <input matInput type="text" appThousandsSeparator formControlName="allowances" inputmode="decimal" />
            </mat-form-field>

            <div class="form-row">
              <mat-form-field appearance="outline">
                <mat-label>Overtime Hrs</mat-label>
                <input matInput type="number" formControlName="overtimeHours" min="0" step="0.01" />
              </mat-form-field>
              <mat-form-field appearance="outline">
                <mat-label>Multiplier</mat-label>
                <input matInput type="number" formControlName="overtimeMultiplier" min="1" step="0.01" />
              </mat-form-field>
            </div>

            <mat-checkbox formControlName="includeHolidayPays" color="primary">Include Holiday Pay</mat-checkbox>

            <div *ngIf="form.value.includeHolidayPays" class="holiday-section">
              <h4>Holiday Days</h4>
              <div class="grid-2">
                <mat-form-field appearance="outline">
                  <mat-label>Reg (Unworked)</mat-label>
                  <input matInput type="number" formControlName="regHolUnworkedDays" min="0" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Reg (Worked)</mat-label>
                  <input matInput type="number" formControlName="regHolWorkedDays" min="0" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Spec (Unworked)</mat-label>
                  <input matInput type="number" formControlName="specHolUnworkedDays" min="0" />
                </mat-form-field>
                <mat-form-field appearance="outline">
                  <mat-label>Spec (Worked)</mat-label>
                  <input matInput type="number" formControlName="specHolWorkedDays" min="0" />
                </mat-form-field>
              </div>
            </div>

            <div class="advanced-settings">
              <span class="label">Advanced Settings</span>
              <div class="form-row">
                <mat-form-field appearance="outline" class="density-sm">
                  <mat-label>Days/Month</mat-label>
                  <input matInput type="number" formControlName="daysPerMonth" min="1" step="0.5" />
                </mat-form-field>
                <mat-form-field appearance="outline" class="density-sm">
                  <mat-label>Hours/Day</mat-label>
                  <input matInput type="number" formControlName="hoursPerDay" min="1" step="0.5" />
                </mat-form-field>
              </div>
            </div>
          </form>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- RESULT COLUMN -->
    <div class="result-col">
      <!-- NET PAY HERO CARD -->
      <mat-card class="result-card">
        <div class="result-label">Estimated Net Pay ({{ view.payFrequency }})</div>
        <div class="result-value">₱{{ view.netPay | number:'1.2-2' }}</div>
      </mat-card>

      <!-- BREAKDOWN CARDS -->
      <div class="breakdown" [@cardsIn]>

        <mat-card class="detail-card">
          <mat-card-header>
            <mat-card-title>Gross Income</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="row">
              <span>Basic ({{ view.payFrequency }})</span>
              <span class="num">₱{{ (view.payFrequency === 'semi-monthly' ? view.grossMonthly / 2 : view.grossMonthly) |
                number:'1.2-2' }}</span>
            </div>
            <div class="row" *ngIf="view.overtimePay > 0">
              <span>Overtime</span>
              <span class="num">₱{{ view.overtimePay | number:'1.2-2' }}</span>
            </div>
            <div class="row" *ngIf="view.includeHolidayPays">
              <span>Holiday Pay</span>
              <span class="num">₱{{ view.holidayPays.total | number:'1.2-2' }}</span>
            </div>
            <div class="row total">
              <span>Gross Total</span>
              <span class="num">₱{{ view.grossPeriod | number:'1.2-2' }}</span>
            </div>
          </mat-card-content>
        </mat-card>

        <mat-card class="detail-card">
          <mat-card-header>
            <mat-card-title>Deductions</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="row">
              <span>SSS</span>
              <span class="num">₱{{ view.contributions.sss.employee | number:'1.2-2' }}</span>
            </div>
            <div class="row">
              <span>PhilHealth</span>
              <span class="num">₱{{ view.contributions.philhealth.employee | number:'1.2-2' }}</span>
            </div>
            <div class="row">
              <span>Pag-IBIG</span>
              <span class="num">₱{{ view.contributions.pagibig.employee | number:'1.2-2' }}</span>
            </div>
            <div class="row">
              <span>Withholding Tax</span>
              <span class="num">₱{{ view.tax | number:'1.2-2' }}</span>
            </div>
            <div class="row total">
              <span>Total Deductions</span>
              <span class="num">₱{{ (view.contribPeriod + view.tax) | number:'1.2-2' }}</span>
            </div>
          </mat-card-content>
        </mat-card>

      </div>
      <app-ad type="cashSpace"></app-ad>
    </div>
  </div>

  <hr class="divider">

  <!-- SEO CONTENT -->
  <article class="content-article">
    <h2>How to Compute Net Pay in the Philippines (2025)</h2>
    <p>
      Estimating your take-home pay involves deducting government mandated contributions and withholding tax from your
      gross salary.
      This calculator uses the latest contribution tables and tax rates applicable for typical Filipino employees.
    </p>

    <h3>1. Government Contributions</h3>
    <ul class="styled-list">
      <li><strong>SSS (Social Security System):</strong> Based on your monthly salary credit. The 2025 schedule includes
        the regular Social Security contribution and the WISP (Worker’s Investment and Savings Program).</li>
      <li><strong>PhilHealth:</strong> The premium rate is now set at 5% of your monthly basic salary, with an income
        floor of ₱10,000 and a ceiling of ₱90,000.</li>
      <li><strong>Pag-IBIG (HDMF):</strong> The standard rate is 2% of your monthly basic salary (capped at ₱5,000
        compensation base), approx ₱100/month.</li>
    </ul>

    <h3>2. Withholding Tax (TRAIN Law)</h3>
    <p>
      After removing contributions, the remaining amount is your <strong>Taxable Income</strong>. The Philippines uses a
      graduated tax schedule under the TRAIN Law (Republic Act No. 10963).
    </p>
    <p>
      <strong>Tax Rates for 2023 onwards:</strong>
    </p>
    <ul class="styled-list">
      <li><strong>Below ₱250,000 / year:</strong> 0% (Tax Exempt)</li>
      <li><strong>₱250,000 - ₱400,000:</strong> 15% of excess over ₱250,000</li>
      <li><strong>₱400,000 - ₱800,000:</strong> ₱22,500 + 20% of excess over ₱400,000</li>
      <li><strong>₱800,000 - ₱2,000,000:</strong> ₱102,500 + 25% of excess over ₱800,000</li>
      <li><strong>₱2,000,000 - ₱8,000,000:</strong> ₱402,500 + 30% of excess over ₱2,000,000</li>
      <li><strong>Above ₱8,000,000:</strong> ₱2,202,500 + 35% of excess over ₱8,000,000</li>
    </ul>

    <h3>3. De Minimis Benefits</h3>
    <p>
      Certain benefits are exempt from tax and do not need to be included in the taxable income calculation, provided
      they are within the allowed ceiling. Common <em>De Minimis</em> benefits include:
    </p>
    <ul>
      <li>Monetized unused vacation leave credits (up to 10 days)</li>
      <li>Medical cash allowance to dependents (up to ₱1,500 per semester)</li>
      <li>Rice subsidy (up to ₱2,000 per month)</li>
      <li>Laundry allowance (up to ₱300 per month)</li>
      <li>Clothing allowance (up to ₱6,000 per year)</li>
    </ul>

    <h3>How to use this Calculator</h3>
    <p>
      simply enter your <strong>Monthly Basic Salary</strong>. If you have additional taxable allowances, add them to
      the allowances field.
      Non-taxable allowances should generally be excluded unless you want to see them in your total take-home cash.
      Check "Include Holiday Pay" if you worked on a Regular or Special Non-Working Holiday to see the additional
      premiums.
    </p>

    <p class="note">
      <strong>Disclaimer:</strong> This tool is for estimation purposes only. Actual deductions may vary based on
      company policies, tardiness/absences, and other adjustments. Always verify with your HR payslip.
    </p>
  </article>
</section>