<header class="hero">
  <div class="hero-content">
    <h1>Loan Amortization</h1>
    <p class="subtitle">Estimate monthly payments for housing, car, or personal loans.</p>
  </div>
</header>

<section class="container">
  <div class="calc-layout">
    <!-- INPUT & RESULT COLUMN -->
    <div class="input-col">
      <mat-card class="input-card">
        <mat-card-header>
          <mat-card-title>Loan Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <form [formGroup]="form" class="grid-form">
            <mat-form-field appearance="outline">
              <mat-label>Amount (₱)</mat-label>
              <input matInput type="text" appThousandsSeparator formControlName="amount" inputmode="decimal" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Annual Rate (%)</mat-label>
              <input matInput type="number" formControlName="annualRate" min="0" step="0.01" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Term (months)</mat-label>
              <input matInput type="number" formControlName="months" min="1" step="1" />
            </mat-form-field>
          </form>
        </mat-card-content>
      </mat-card>

      <mat-card class="result-card">
        <div class="result-label">Estimated Monthly Payment</div>
        <div class="result-value">₱{{ schedule.payment | number:'1.2-2' }}</div>
      </mat-card>
    </div>

    <!-- TABLE RESULT -->
    <div class="table-col">
      <mat-card class="table-card">
        <div class="table-wrap" [@tableIn]>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Payment</th>
                <th>Interest</th>
                <th>Principal</th>
                <th>Balance</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of pagedRows">
                <td>{{ r.period }}</td>
                <td>₱{{ r.payment | number:'1.2-2' }}</td>
                <td>₱{{ r.interest | number:'1.2-2' }}</td>
                <td>₱{{ r.principal | number:'1.2-2' }}</td>
                <td>₱{{ r.balance | number:'1.2-2' }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="pager">
          <div class="pager__left">
            <button mat-icon-button (click)="first()" [disabled]="!canPrev()" title="First Page">
              <mat-icon>first_page</mat-icon>
            </button>
            <button mat-icon-button (click)="prev()" [disabled]="!canPrev()" title="Previous Page">
              <mat-icon>chevron_left</mat-icon>
            </button>
            <span class="pager-info">{{ startIndex + 1 }}–{{ endIndex }} of {{ totalRows }}</span>
            <button mat-icon-button (click)="next()" [disabled]="!canNext()" title="Next Page">
              <mat-icon>chevron_right</mat-icon>
            </button>
            <button mat-icon-button (click)="last()" [disabled]="!canNext()" title="Last Page">
              <mat-icon>last_page</mat-icon>
            </button>
          </div>
          <div class="pager__right">
            <mat-form-field appearance="outline" class="pager__size density-sm">
              <mat-label>Rows</mat-label>
              <mat-select [value]="pageSize" (selectionChange)="setPageSize($event.value)">
                <mat-option [value]="12">12</mat-option>
                <mat-option [value]="24">24</mat-option>
                <mat-option [value]="60">60</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <hr class="divider">

  <!-- SEO CONTENT -->
  <article class="content-article">
    <h2>Loan Amortization in the Philippines</h2>
    <p>
      Whether you are applying for a housing loan (Pag-IBIG/Bank), car loan, or salary loan, understanding how your
      monthly amortization is computed is essential for financial planning.
      This calculator assumes a standard fixed-rate loan structure common in Philippine banks (BDO, BPI, Metrobank,
      Security Bank) and government agencies.
    </p>

    <h3>Amortization Formula</h3>
    <p>
      This calculator uses the standard <strong>diminishing balance</strong> method. This means your interest is
      calculated based on the remaining principal balance each month.
      As you pay off the principal, the interest portion decreases, and more of your monthly payment goes toward the
      principal.
    </p>
    <p>
      <em>Note: This is different from "Add-on Rate" loans often used for cars or gadgets, where interest is computed on
        the original principal for the entire term.</em>
    </p>

    <h3>Key Factors Affecting Your Loan</h3>
    <ul class="styled-list">
      <li><strong>Principal Amount:</strong> The total amount you are borrowing. Ensure this fits your Debt-to-Income
        ratio (usually max 30-40% of your gross income).</li>
      <li><strong>Annual Interest Rate:</strong> The percentage charged by the lender per year.
        <ul>
          <li><strong>Pag-IBIG Housing:</strong> Approx 5.75% to 6.375% (depends on fixing period).</li>
          <li><strong>Bank Housing:</strong> 6% to 10% (floating/repricing).</li>
          <li><strong>Personal Loans:</strong> 12% to 25%+.</li>
        </ul>
      </li>
      <li><strong>Term:</strong> The duration of the loan. Longer terms (e.g., 15-30 years for housing) result in lower
        monthly payments but significantly higher total interest paid.</li>
    </ul>

    <h3>Understanding Repricing Periods</h3>
    <p>
      A "Fixing Period" or "Repricing Period" is the time during which your interest rate is guaranteed.
      For example, if you choose a 5-year fixing period on a 20-year loan, your rate stays the same for 5 years.
      After that, the bank will "reprice" or adjust your rate based on current market conditions.
      Always be prepared for potential rate hikes after your fixing period ends.
    </p>

    <div class="cta-wrapper">
      <a mat-stroked-button color="primary" routerLink="/articles">View All Guides</a>
    </div>
  </article>
</section>