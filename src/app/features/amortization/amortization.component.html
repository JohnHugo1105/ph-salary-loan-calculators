<header class="hero">
  <div class="hero-content">
    <h1>Loan Amortization</h1>
    <p class="subtitle">Estimate monthly payments for housing, car, or personal loans.</p>
  </div>
</header>

<section class="container">
  <div class="calc-layout">
    <!-- INPUT & RESULT COLUMN -->
    <div class="input-col">
      <mat-card class="input-card">
        <mat-card-header>
          <mat-card-title>Loan Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <form [formGroup]="form" class="grid-form">
            <mat-form-field appearance="outline">
              <mat-label>Amount (₱)</mat-label>
              <input matInput type="text" appThousandsSeparator formControlName="amount" inputmode="decimal" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Annual Rate (%)</mat-label>
              <input matInput type="number" formControlName="annualRate" min="0" step="0.01" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Term (months)</mat-label>
              <input matInput type="number" formControlName="months" min="1" step="1" />
            </mat-form-field>
          </form>
        </mat-card-content>
      </mat-card>

      <mat-card class="result-card">
        <div class="result-label">Estimated Monthly Payment</div>
        <div class="result-value">₱{{ schedule.payment | number:'1.2-2' }}</div>
      </mat-card>
    </div>

    <!-- TABLE RESULT -->
    <div class="table-col">
      <mat-card class="table-card">
        <div class="table-wrap" [@tableIn]>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Payment</th>
                <th>Interest</th>
                <th>Principal</th>
                <th>Balance</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of pagedRows">
                <td>{{ r.period }}</td>
                <td>₱{{ r.payment | number:'1.2-2' }}</td>
                <td>₱{{ r.interest | number:'1.2-2' }}</td>
                <td>₱{{ r.principal | number:'1.2-2' }}</td>
                <td>₱{{ r.balance | number:'1.2-2' }}</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="pager">
          <div class="pager__left">
            <button mat-icon-button (click)="first()" [disabled]="!canPrev()" title="First Page">
              <mat-icon>first_page</mat-icon>
            </button>
            <button mat-icon-button (click)="prev()" [disabled]="!canPrev()" title="Previous Page">
              <mat-icon>chevron_left</mat-icon>
            </button>
            <span class="pager-info">{{ startIndex + 1 }}–{{ endIndex }} of {{ totalRows }}</span>
            <button mat-icon-button (click)="next()" [disabled]="!canNext()" title="Next Page">
              <mat-icon>chevron_right</mat-icon>
            </button>
            <button mat-icon-button (click)="last()" [disabled]="!canNext()" title="Last Page">
              <mat-icon>last_page</mat-icon>
            </button>
          </div>
          <div class="pager__right">
            <mat-form-field appearance="outline" class="pager__size density-sm">
              <mat-label>Rows</mat-label>
              <mat-select [value]="pageSize" (selectionChange)="setPageSize($event.value)">
                <mat-option [value]="12">12</mat-option>
                <mat-option [value]="24">24</mat-option>
                <mat-option [value]="60">60</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-card>
      <app-ad type="cashExpress"></app-ad>
    </div>
  </div>

  <hr class="divider">

  <!-- SEO CONTENT -->
  <article class="content-article">
    <h2>Loan Amortization in the Philippines</h2>
    <p>
      Whether you are applying for a housing loan (Pag-IBIG/Bank), car loan, or salary loan, understanding how your
      monthly amortization is computed is essential for financial planning.
      This calculator assumes a standard fixed-rate loan structure common in Philippine banks (BDO, BPI, Metrobank,
      Security Bank) and government agencies.
    </p>

    <h2>What is a Diminishing Balance Interest Rate?</h2>
    <p>
      Most formal loans in the Philippines (like Housing and Auto loans) use the <strong>Diminishing Balance</strong>
      method.
      This means your interest is calculated based on the <strong>remaining principal balance</strong> each month, not
      the original amount.
    </p>
    <p>
      <strong>How it works:</strong>
    </p>
    <ul class="styled-list">
      <li>In the beginning, a large chunk of your monthly payment goes to <strong>Interest</strong>.</li>
      <li>As you pay off the principal, the interest portion decreases.</li>
      <li>Towards the end of the loan term, most of your payment goes to the <strong>Principal</strong>.</li>
    </ul>
    <p>
      <em>Note: This is different from "Add-on Rate" loans (often used for quick cash or gadgets), where interest is
        fixed on the original amount. Diminishing balance is generally fairer for long-term loans.</em>
    </p>

    <h2>How to Lower Your Monthly Amortization</h2>
    <p>
      If the calculated monthly payment is too high for your budget, here are practical ways to lower it:
    </p>
    <ul class="styled-list">
      <li><strong>Extend the Loan Term:</strong> Stretching a loan from 10 years to 20 years will significantly drop
        your
        monthly bill. (However, you will pay more total interest over time).</li>
      <li><strong>Increase Your Downpayment:</strong> Paying more upfront reduces the principal amount you need to
        borrow.</li>
      <li><strong>Negotiate a Lower Interest Rate:</strong> Banks often offer lower rates to clients with good credit
        scores or those who can provide more collateral.</li>
      <li><strong>Shop Around:</strong> Compare rates between Pag-IBIG and commercial banks. Pag-IBIG often offers lower
        rates for low-income earners.</li>
      <li><strong>Make Advance Payments to Principal:</strong> If your bank allows it, paying extra directly to the
        principal can shorten your loan term and reduce interest costs.</li>
    </ul>

    <h3>Understanding Repricing Periods</h3>
    <p>
      A "Fixing Period" or "Repricing Period" is the time during which your interest rate is guaranteed.
      For example, if you choose a 5-year fixing period on a 20-year loan, your rate stays the same for 5 years.
      After that, the bank will "reprice" or adjust your rate based on current market conditions.
      Always be prepared for potential rate hikes after your fixing period ends.
    </p>

    <div class="cta-wrapper">
      <a mat-stroked-button color="primary" routerLink="/articles">View All Guides</a>
    </div>
  </article>
</section>